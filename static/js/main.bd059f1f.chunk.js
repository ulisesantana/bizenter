(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{175:function(e,t,a){e.exports=a(315)},181:function(e,t,a){},182:function(e,t,a){},315:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),o=a(38),s=a.n(o),c=(a(180),a(181),a(24));a(182);!function(e){e.UPSERT_ASSET="UPSERT_ASSET",e.UPSERT_HOLDER="UPSERT_HOLDER",e.UPDATE_ALL="UPDATE_ALL",e.REPLACE_ALL="REPLACE_ALL",e.DELETE_ALL="DELETE_ALL"}(n||(n={}));var i=Object.freeze({get:function(e){var t=localStorage.getItem(e),a=new RegExp(/^\d+$/),n=new RegExp(/[[{].*[}\]]/);return t?n.test(t)?JSON.parse(t):a.test(t)?parseFloat(t):t:void 0},set:function(e,t){"object"===typeof t?localStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,t.toString())},remove:function(e){localStorage.removeItem(e)}}),u="bizenter@store",d={assets:{},holders:{},records:[]},m=a(31),E=a(16);function h(e){return Object.values(e).reduce(function(e,t){return Object(E.a)({},e,Object(m.a)({},t.id,t))},{})}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a){return a.sort(function(a,n){var r=a[e],l=n[e];return r.toLowerCase()<l.toLowerCase()?t?1:-1:r.toLowerCase()>l.toLowerCase()?t?-1:1:0})}}var b,v=f("name"),g=(f("date"),f("date",!0));function p(e,t){return function(e,a){var n=a.name,r=a.value,l=a.checked;e.preventDefault(),t(Object(m.a)({},n,void 0!==l?l:r))}}function S(e,t){return function(){t(e)}}!function(e){e.TransferRecords="TRANSFER_RECORDS",e.Holders="HOLDERS",e.Assets="ASSETS"}(b||(b={}));function O(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return a.reduce(function(e,t){return t(e)},e)}function C(e){var t=e.assets,a=e.holders,n=e.records;return{assets:O(Object.values(t),v,h),holders:O(Object.values(a),v,h),records:g(n)}}var j=a(40),w=a.n(j);function T(e){return Object(E.a)({id:w()(),createDate:(new Date).toISOString(),name:"",notes:"",blocked:!1,serial:"",assignedTo:!1},e,{updateDate:(new Date).toISOString()})}var k=function(e){return i.set(u,e),e};function A(e,t){return O(function(e,t){var a,r,l,o,s=t.type,c=t.payload;switch(s){case n.UPSERT_HOLDER:var d=c.id||w()();return Object(E.a)({},e,{holders:Object(E.a)({},e.holders,Object(m.a)({},d,(o=Object(E.a)({id:d},c),Object(E.a)({id:w()(),createDate:(new Date).toISOString(),name:"meh",notes:"",blocked:!1},o,{updateDate:(new Date).toISOString()}))))});case n.UPSERT_ASSET:var h=c.id||w()();if(c.hasOwnProperty("from")){var f=c,b=f.from,v=f.to;return Object(E.a)({},e,{records:e.records.concat((a=b,r=v,l=h,{id:w()(),date:(new Date).toISOString(),from:a,to:r,asset:l})),assets:Object(E.a)({},e.assets,Object(m.a)({},h,T(Object(E.a)({id:h,assignedTo:v},c))))})}return Object(E.a)({},e,{assets:Object(E.a)({},e.assets,Object(m.a)({},h,T(Object(E.a)({id:h},c))))});case n.REPLACE_ALL:return c;case n.UPDATE_ALL:return Object(E.a)({},e,c);case n.DELETE_ALL:return i.remove(u),{assets:{},holders:{},records:[]};default:return e}}(e,t),C,k)}var H=a(71),y=a(72),L=a(80),R=a(73),D=a(81),F=a(323),I=a(327),_=function(e){var t=e.editMode;return l.a.createElement(I.a,{color:t?"blue":"green",type:"submit"},t?"Save":"Create")},P={name:"",notes:"",blocked:!1,serial:"",assignedTo:!1},N=function(e){function t(){var e,a,n;Object(H.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(L.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(l)))).editMode=void 0!==a.props.asset,a.state=a.editMode?a.props.asset:P,a.options=(n=a.props.holders,[{key:"free",text:"Free",value:!1}].concat(Object.values(n).map(function(e){var t=e.id;return{key:t,text:e.name,value:t}}))),a.onChangeHandler=p(a.state,function(e){a.setState(e)}),a.onSubmit=function(e){e.preventDefault();var t=a.editMode?a.props.asset.assignedTo:null;t===a.state.assignedTo?a.props.onSubmit(a.state):a.props.onSubmit(Object(E.a)({},a.state,{from:t,to:a.state.assignedTo})),a.editMode||a.setState(P)},a}return Object(D.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,{onSubmit:this.onSubmit},l.a.createElement(F.a.Input,{name:"name",value:this.state.name,required:!0,onChange:this.onChangeHandler,placeholder:"Full Name",label:"Full Name"}),l.a.createElement(F.a.TextArea,{name:"notes",value:this.state.notes,onChange:this.onChangeHandler,placeholder:"Observations",label:"Notes"}),l.a.createElement(F.a.Checkbox,{name:"blocked",checked:this.state.blocked,onChange:this.onChangeHandler,label:"Blocked"}),l.a.createElement(F.a.Input,{name:"serial",required:!0,value:this.state.serial,onChange:this.onChangeHandler,placeholder:"LHG1L451G6L1GL41",label:"Serial Number"}),l.a.createElement(F.a.Select,{fluid:!0,name:"assignedTo",label:"Holder",options:this.options,placeholder:"Holder",search:!0,onChange:this.onChangeHandler,value:this.state.assignedTo}),l.a.createElement(_,{editMode:this.editMode})))}}]),t}(r.Component),U=a(328),x=a(325),M=a(34),B=function(e){var t=e.onClick;return l.a.createElement(M.a,{name:"chevron left",onClick:t})},W={name:"",notes:"",blocked:!1},z=function(e){function t(){var e,a;Object(H.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(L.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).editMode=void 0!==a.props.holder,a.state=a.editMode?a.props.holder:W,a.onChangeHandler=p(a.state,function(e){a.setState(e)}),a.onSubmit=function(e){e.preventDefault(),a.props.onSubmit(a.state),a.editMode||a.setState(W)},a}return Object(D.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return l.a.createElement(F.a,{onSubmit:this.onSubmit},l.a.createElement(F.a.Input,{name:"name",value:this.state.name,onChange:this.onChangeHandler,placeholder:"Full Name",label:"Full Name"}),l.a.createElement(F.a.TextArea,{name:"notes",value:this.state.notes,onChange:this.onChangeHandler,placeholder:"Observations",label:"Notes"}),l.a.createElement(F.a.Checkbox,{name:"blocked",checked:this.state.blocked,onChange:this.onChangeHandler,label:"Blocked"}),l.a.createElement(_,{editMode:this.editMode}))}}]),t}(r.Component),J=a(324),G=function(e){var t=e.holders,a=e.onClick;return l.a.createElement(J.a,{celled:!0,selectable:!0},l.a.createElement(J.a.Header,null,l.a.createElement(J.a.Row,null,l.a.createElement(J.a.HeaderCell,null,"Name"),l.a.createElement(J.a.HeaderCell,null,"Status"),l.a.createElement(J.a.HeaderCell,null,"Notes"))),l.a.createElement(J.a.Body,null,Object.values(t).map(function(e){var t=e.name,n=e.notes,r=e.blocked,o=e.id;return l.a.createElement(J.a.Row,{key:o,"data-id":o,onClick:a},l.a.createElement(J.a.Cell,null,t),l.a.createElement(J.a.Cell,null,r?"Blocked":"Active"),l.a.createElement(J.a.Cell,null,n))})))},q=function(e){var t=e.holders,a=e.assets,n=e.records;return l.a.createElement(J.a,{celled:!0,selectable:!0},l.a.createElement(J.a.Header,null,l.a.createElement(J.a.Row,null,l.a.createElement(J.a.HeaderCell,null,"Date"),l.a.createElement(J.a.HeaderCell,null,"Asset"),l.a.createElement(J.a.HeaderCell,null,"Asset Serial"),l.a.createElement(J.a.HeaderCell,null,"From"),l.a.createElement(J.a.HeaderCell,null,"To"))),l.a.createElement(J.a.Body,null,n.map(function(e){var n=e.id,r=e.asset,o=e.date,s=e.from,c=e.to;return l.a.createElement(J.a.Row,{key:n,"data-id":n},l.a.createElement(J.a.Cell,null,o),l.a.createElement(J.a.Cell,null,a[r].name),l.a.createElement(J.a.Cell,null,a[r].serial),l.a.createElement(J.a.Cell,null,t[s]&&t[s].name),l.a.createElement(J.a.Cell,null,t[c]&&t[c].name))})))},$=a(326),K=function(e){var t=e.section,a=e.handlers;return l.a.createElement($.a,{icon:"labeled",stackable:!0},l.a.createElement($.a.Item,{name:"warehouse",active:t===b.Assets,onClick:a.goToAssets},l.a.createElement(M.a,{name:"warehouse"}),"Assets"),l.a.createElement($.a.Item,{name:"user",active:t===b.Holders,onClick:a.goToHolders},l.a.createElement(M.a,{name:"user"}),"Holders"),l.a.createElement($.a.Item,{name:"history",active:t===b.TransferRecords,onClick:a.gotoTransferRecords},l.a.createElement(M.a,{name:"history"}),"History"))};var Q=function(e){var t,a=e.assets,o=e.holders,s=e.records,i=e.dispatch,u=function(e){i({type:n.UPSERT_ASSET,payload:e})},d=Object(r.useState)(!1),m=Object(c.a)(d,2),E=m[0],h=m[1],f=Object(r.useState)(""),b=Object(c.a)(f,2),v=b[0],g=b[1],p=function(e){e.preventDefault();var t=e.currentTarget.dataset;t.id&&(console.log(a[t.id]),g(t.id),h(!0))},S=s.filter((t=v,function(e){return e.asset===t}));return E?l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,null,l.a.createElement(B,{onClick:function(){h(!1)}}),l.a.createElement("h2",null,"Edit Asset"),l.a.createElement(N,{holders:o,onSubmit:u,asset:a[v]})),S.length&&l.a.createElement(U.a,null,l.a.createElement("h2",null,a[v].name," History"),l.a.createElement(q,{holders:o,assets:a,records:S}))):l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,null,l.a.createElement("h2",null,"Add Asset"),l.a.createElement(N,{holders:o,onSubmit:u})),l.a.createElement(U.a,null,l.a.createElement("h3",null,"Free"),l.a.createElement(x.a,{divided:!0,relaxed:!0},Object.values(a).filter(function(e){return!e.assignedTo}).map(function(e){var t=e.name,a=e.id,n=e.assignedTo;return l.a.createElement(x.a.Item,{key:a,onClick:p,"data-id":a},l.a.createElement(x.a.Content,null,l.a.createElement(x.a.Header,null,t),"string"===typeof n?"Assigned to ".concat(o[n].name):"Free"))})),l.a.createElement("h3",null,"Taken"),l.a.createElement(x.a,{divided:!0,relaxed:!0},Object.values(a).filter(function(e){return e.assignedTo}).map(function(e){var t=e.name,a=e.id,n=e.assignedTo;return l.a.createElement(x.a.Item,{key:a,onClick:p,"data-id":a},l.a.createElement(x.a.Content,null,l.a.createElement(x.a.Header,null,t),"string"===typeof n?"Assigned to ".concat(o[n].name):"Free"))}))))};var V=function(e){var t,a=e.holders,o=e.records,s=e.assets,i=e.dispatch,u=Object(r.useState)(!1),d=Object(c.a)(u,2),m=d[0],E=d[1],h=Object(r.useState)(""),f=Object(c.a)(h,2),b=f[0],v=f[1],g=function(e){i({type:n.UPSERT_HOLDER,payload:e})},p=o.filter((t=b,function(e){return e.from===t||e.to===t}));return l.a.createElement(l.a.Fragment,null,m?l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,null,l.a.createElement(B,{onClick:function(){E(!1)}}),l.a.createElement("h2",null,"Edit Holder"),l.a.createElement(z,{onSubmit:g,holder:a[b]})),!!p.length&&l.a.createElement(U.a,null,l.a.createElement("h2",null,a[b].name," History"),l.a.createElement(q,{holders:a,assets:s,records:p}))):l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,null,l.a.createElement("h2",null,"Add Holder"),l.a.createElement(z,{onSubmit:g})),l.a.createElement(U.a,null,l.a.createElement(G,{holders:a,onClick:function(e){e.preventDefault();var t=e.currentTarget.dataset;t.id&&(v(t.id),E(!0))}}))))},X=a(322),Y=function(){var e=function(){var e=i.get(u);return e||C(d)}(),t=Object(r.useReducer)(A,e),a=Object(c.a)(t,2),n=a[0],o=n.assets,s=n.holders,m=n.records,E=a[1],h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.Assets,t=Object(r.useState)(e),a=Object(c.a)(t,2),n=a[0],l=a[1];return[n,{gotoTransferRecords:S(b.TransferRecords,l),goToHolders:S(b.Holders,l),goToAssets:S(b.Assets,l)}]}(),f=Object(c.a)(h,2),v=f[0],g=f[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(K,{section:v,handlers:g}),l.a.createElement(X.a,{className:"main"},v===b.Holders&&l.a.createElement(V,{assets:o,records:m,holders:s,dispatch:E}),v===b.Assets&&l.a.createElement(Q,{records:m,assets:o,holders:s,dispatch:E}),v===b.TransferRecords&&l.a.createElement(q,{assets:o,holders:s,records:m})))},Z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ee(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(l.a.createElement(Y,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/bizenter",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/bizenter","/service-worker.js");Z?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ee(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ee(t,e)})}}()}},[[175,1,2]]]);
//# sourceMappingURL=main.bd059f1f.chunk.js.map